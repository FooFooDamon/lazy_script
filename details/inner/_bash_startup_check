#
# _bash_startup_check.sh
#
#  Created on: 2018-05-28
#
#      Author: WenXiongchang (udc577@126.com)
#
# Description: For checking during bash initialization.
#
#       Usage: This script should be used by inner modules only.
#

for i in ${_NECESSARY_TOOLS[@]}
do
	warn_if_not_installed $i
done

for i in ${_NECESSARY_DIRS[@]}
do
	mkdir -p "$i"
done

[ -d $__LAZY_SCRIPT_HOME__/details/shortcuts ] || mkdir -p $__LAZY_SCRIPT_HOME__/details/shortcuts
find $__LAZY_SCRIPT_HOME__/details/ -name "*.sh" | while read i
do
	shortcut=$__LAZY_SCRIPT_HOME__/details/shortcuts/$(basename "$i" .sh)
	[ -f "$shortcut" ] || ln -s -f -n "$i" "$shortcut"
done

# Permits core file generation for programs
ulimit -c unlimited

# Disables copy functionality of the mouse middle button
if [ ! -f ~/.Xmodmap ]
then
	echo "pointer = 1 25 3 4 5 6 7 2" >> ~/.Xmodmap
fi

[ -f $__LAZY_SCRIPT_HOME__/details/shell_common.sh ] || ln -s -f -n $__LAZY_SCRIPT_HOME__/details/inner/_shell_common.sh $__LAZY_SCRIPT_HOME__/details/shell_common.sh

_PRIVATE_DIR=$__LAZY_SCRIPT_HOME__/details/private

#
# Private bashrc
#

if [ ! -f $_PRIVATE_DIR/_bash_private ]
then
	echo "#" > $_PRIVATE_DIR/_bash_private
	echo "# Put your own configurations in this file." >> $_PRIVATE_DIR/_bash_private
	echo "#" >> $_PRIVATE_DIR/_bash_private
fi

#
# For vim
#

if [ ! -f $_PRIVATE_DIR/vim/vimrc.private ]
then
	echo "\"" > $_PRIVATE_DIR/vim/vimrc.private
	echo "\" Put your own configurations in this file." >> $_PRIVATE_DIR/vim/vimrc.private
	echo "\"" >> $_PRIVATE_DIR/vim/vimrc.private
fi

[ -f $VIMRC ] || touch $VIMRC
[ `grep "vimrc\.public" $VIMRC -c` -gt 0 ] || echo "source \$LAZY_SCRIPT_HOME/details/etc/vimrc.public" >> $VIMRC
[ `grep "vimrc\.private" $VIMRC -c` -gt 0 ] || echo "source \$LAZY_SCRIPT_HOME/details/private/vim/vimrc.private" >> $VIMRC

